#!/bin/sh

# host -> repo
#
# This script takes the `./file-list` and copies these files from the host to 
# the repository. 

set -e

# fetch list and remove comments and blank lines
sed '/\(^$\|^#\)/d' bin/config-file-list | \
  sed 's|~|'${HOME}'|g' | \
  while read line; do 
    files=($line)

    repo_location=${files[0]}
    host_location=${files[1]}

    # if host has / add * 
    if [[ ${host_location} == */ ]]; then 
      host_location="${host_location}*"
    fi 

    cp --force -r ${host_location} ${repo_location}
    echo "${host_location} -> ${repo_location}"
  done
