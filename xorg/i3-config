# Globals 

set $white    #b7bec9
set $black    #262729
set $grey     #88909f
set $darkgrey #5b6371
set $red      #e77171
set $green    #a1bf78
set $cyan     #5ebaa5
set $yellow   #dbb774
set $blue     #73b3e7
set $magenta  #d390e7

set $font        DejaVu Sans
set $font_weight Bold
set $font_size   8

set $mod   Mod4
set $up    k
set $down  j
set $left  h
set $right l

set $location 48.22:16.31

set $ws-code      "1:&#xf121;"
set $ws-browse    "2:&#xf57d;"
set $ws-term      "3:&#xf120;"
set $ws-messaging "4:&#xf086;"
set $ws-music     "5:&#xf025;"

set $ws-code-key      1
set $ws-browse-key    2
set $ws-term-key      3
set $ws-messaging-key 4
set $ws-music-key     5

# General commands  

font              pango:$font $font_weight $font_size
floating_modifier $mod

bindsym $mod+Return            exec --no-startup-id urxvt
bindsym $mod+Escape            exec --no-startup-id ~/.bin/lock-screen
bindsym $mod+Shift+a           exec --no-startup-id ~/.bin/autostart
bindsym $mod+Shift+q           kill
bindsym $mod+BackSpace         reload
bindsym $mod+Shift+BackSpace   restart
bindsym $mod+XF86Display       exec --no-startup-id ~/.bin/monitor-setup
bindsym $mod+Shift+XF86Display exec --no-startup-id ~/.bin/monitor-reset

bindsym $mod+space exec --no-startup-id i3-dmenu-desktop \
  --dmenu="dmenu -i -l 5 -b -fn '$font-$font_size' -nf '$grey' -nb '$black' -sf '$black' -sb '$white'" 

bindsym $mod+p exec --no-startup-id passmenu \
  -i -l 5 -fn '$font-$font_size' -nf '$grey' -nb '$black' -sf '$black' -sb '$white'

bindsym $mod+Shift+e exec \
  "i3-nagbar --font 'pango:$font $font_size' -t warning -m 'Exit?' -B 'Okay' 'i3-msg exit'"

bindsym --release $mod+Print exec --no-startup-id scrot -s 

# Multimedia Keys

bindsym XF86AudioMute        exec --no-startup-id pactl set-sink-mute   0 toggle
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -5%
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +5%
bindsym XF86AudioMicMute     exec --no-startup-id pactl set-source-mute 1 toggle

bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 5 && \
  xbacklight -get | cut -d'.' -f 1 > /home/manfred/.cache/backlight

bindsym XF86MonBrightnessUp   exec --no-startup-id xbacklight -inc 5 && \
  xbacklight -get | cut -d'.' -f 1 > /home/manfred/.cache/backlight

# Spotify 

bindsym $mod+XF86AudioMute        exec --no-startup-id \
  dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause

bindsym $mod+XF86AudioLowerVolume exec --no-startup-id \
  dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous

bindsym $mod+XF86AudioRaiseVolume exec --no-startup-id \
  dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next

# Movement 

bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right

bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$right move right

# Layout 

bindsym $mod+c split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle

bindsym $mod+w layout tabbed
bindsym $mod+s layout toggle split

bindsym $mod+a focus parent
bindsym $mod+y focus child

bindsym $mod+Shift+f     floating toggle
bindsym $mod+Shift+space sticky toggle

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+mius        scratchpad show

bindsym $mod+d focus     mode_toggle
bindsym $mod+u workspace back_and_forth

# Workspaces 

bindsym $mod+$ws-code-key      workspace $ws-code
bindsym $mod+$ws-browse-key    workspace $ws-browse
bindsym $mod+$ws-term-key      workspace $ws-term
bindsym $mod+$ws-messaging-key workspace $ws-messaging
bindsym $mod+$ws-music-key     workspace $ws-music

bindsym $mod+Shift+$ws-code-key      move container to workspace $ws-code
bindsym $mod+Shift+$ws-browse-key    move container to workspace $ws-browse
bindsym $mod+Shift+$ws-term-key      move container to workspace $ws-term
bindsym $mod+Shift+$ws-messaging-key move container to workspace $ws-messaging
bindsym $mod+Shift+$ws-music-key     move container to workspace $ws-music

# Resize 

mode "resize" {
  bindsym $left       resize shrink width  10 px or 10 ppt
  bindsym $down       resize grow   height 10 px or 10 ppt
  bindsym $up         resize shrink height 10 px or 10 ppt
  bindsym $right      resize grow   width  10 px or 10 ppt
  bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Move workspaces

mode "move ws" {
  bindsym 1 move workspace to output eDP1
  bindsym 2 move workspace to output DP1
  bindsym 3 move workspace to output DP2
  bindsym 4 move workspace to output HDMI1
  bindsym 5 move workspace to output HDMI2
  bindsym Escape mode "default" 
}
bindsym $mod+m mode "move ws" 

# Assign workspaces to screens 

workspace $ws-code      output DP2 eDP1
workspace $ws-browse    output DP2
workspace $ws-term      output DP2 eDP1
workspace $ws-messaging output eDP1
workspace $ws-music     output eDP1

# Styling 

gaps              inner 14
smart_gaps        on
hide_edge_borders smart
title_align       center

for_window [class=".*"] border pixel 1

#                       border   bground  text      indic.   child_border
client.focused          $whiteaa $whiteaa $black    $blue    $white
client.focused_inactive $blackaa $blackaa $darkgrey $black00 $black00
client.unfocused        $blackaa $blackaa $darkgrey $black00 $black00
client.urgent           $blackaa $blackaa $red      $blackaa $blackaa
client.placeholder      $blackaa $blackaa $whiteaa  $blackaa $blackaa
client.background       $blackaa

# Bar 

bar {
  status_command          i3status
  i3bar_command           i3bar --transparency
  position                top
  tray_output             none
  strip_workspace_numbers yes
  output                  eDP1

  colors {
    background $black00
    statusline $white
    separator  $whiteaa

    #	               border   bground  text
    focused_workspace  $black00 $black00 $magenta
    active_workspace   $black00 $black00 $grey
    inactive_workspace $black00 $black00 $grey
    urgent_workspace   $black00 $black00 $red
    binding_mode       $black00 $yellow  $black
  }
}

# Application assginments 

assign [instance="^nvim$"]             $ws-code
assign [instance="^chromium$"]         $ws-browse
assign [instance="^Navigator$"]        $ws-browse
assign [instance="^youtube.com$"]      $ws-music
assign [instance="^netflix.com$"]      $ws-music
assign [instance="^atv.at$"]           $ws-music
assign [instance="^web.whatsapp.com$"] $ws-messaging
assign [instance="^matterhorn$"]       $ws-messaging
assign [instance="^talk.sclable.com$"] $ws-messaging
assign [instance="^telegram-desktop$"] $ws-messaging

for_window [instance="^spotify$"]   move to workspace $ws-music
for_window [instance="^urxvt$"]     focus
for_window [instance="^chromium$"]  focus
for_window [instance="^nvim$"]      focus
for_window [instance="^Navigator$"] focus

# Autostart 

exec --no-startup-id ~/.fehbg
exec --no-startup-id redshift -l $location
exec --no-startup-id compton -b 
exec --no-startup-id unclutter --timeout 1 
exec --no-startup-id dunst 
exec --no-startup-id xautolock -time 2 -locker ~/.bin/lock-screen
