#
# i3 config file (v4)
# Manfred Mjka <manixx90@gmail.com>
#

# Globals 

set $white   #b7bec9
set $black   #262729
set $grey    #88909f
set $red     #e77171
set $green   #a1bf78
set $cyan    #5ebaa5
set $yellow  #dbb774
set $blue    #73b3e7
set $magenta #d390e7

set $font        DejaVu Sans
set $font_weight Bold
set $font_size   8

set $mod   Mod4
set $up    k
set $down  j
set $left  h
set $right l


# General commands  

font              pango:$font $font_size
floating_modifier $mod

bindsym $mod+Return exec --no-startup-id i3-sensible-terminal
bindsym $mod+q kill
bindsym $mod+Shift+t reload
bindsym $mod+Shift+r restart

bindsym $mod+space exec --no-startup-id i3-dmenu-desktop \
  --dmenu="dmenu -i -l 5 -b -fn '$font-$font_size' -nf '$grey' -nb '$black' -sf '$black' -sb '$white'" 

bindsym $mod+Shift+p exec --no-startup-id passmenu \
  -i -l 5 -fn '$font-$font_size' -nf '$grey' -nb '$black' -sf '$black' -sb '$white'

bindsym $mod+Shift+e exec \
  "i3-nagbar --font 'pango:$font $font_size' -t warning -m 'Exit?' -B 'Hell yes!' 'i3-msg exit'"

bindsym $mod+Escape  exec --no-startup-id ~/.bin/lock-screen
bindsym $mod+Shift+a exec --no-startup-id ~/.bin/autostart

bindsym --release $mod+Print exec --no-startup-id scrot -s 

# Multimedia Keys

bindsym XF86AudioMute        exec --no-startup-id amixer set Master toggle
bindsym XF86AudioLowerVolume exec --no-startup-id amixer set Master 5%-
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer set Master 5%+
bindsym XF86AudioMicMute     exec --no-startup-id amixer set Capture toggle

bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 5 && \
  xbacklight -get | cut -d'.' -f 1 > /home/manfred/.config/backlight

bindsym XF86MonBrightnessUp   exec --no-startup-id xbacklight -inc 5 && \
  xbacklight -get | cut -d'.' -f 1 > /home/manfred/.config/backlight

# bindsym XF86Tools     exec --no-startup-id urxvt -e nnn
# bindsym XF86Display   exec --no-startup-id -- reserved for auth guard 
# bindsym XF86Favorites exec --no-startup-id 

# Spotify 

bindsym $mod+XF86AudioMute        exec --no-startup-id \
  dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause

bindsym $mod+XF86AudioLowerVolume exec --no-startup-id \
  dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous

bindsym $mod+XF86AudioRaiseVolume exec --no-startup-id \
  dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next

# Movement 

bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right

bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$right move right

# Layout 

bindsym $mod+c split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+a focus parent
bindsym $mod+y focus child

bindsym $mod+Shift+f     floating toggle
bindsym $mod+Shift+space sticky toggle

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus       scratchpad show

bindsym $mod+g focus mode_toggle

# Workspaces 

set $ws-code      "1:&#xf121;"
set $ws-browse    "2:&#xf57d;"
set $ws-term      "3:&#xf120;"
set $ws-messaging "4:&#xf086;"
set $ws-music     "5:&#xf025;"
set $ws-misc      "6:&#xf1e5;"

bindsym $mod+1 workspace $ws-code
bindsym $mod+2 workspace $ws-browse
bindsym $mod+3 workspace $ws-term
bindsym $mod+4 workspace $ws-messaging
bindsym $mod+5 workspace $ws-music 
bindsym $mod+0 workspace $ws-misc

bindsym $mod+Shift+1 move container to workspace $ws-code
bindsym $mod+Shift+2 move container to workspace $ws-browse
bindsym $mod+Shift+3 move container to workspace $ws-term
bindsym $mod+Shift+4 move container to workspace $ws-messaging
bindsym $mod+Shift+5 move container to workspace $ws-music 
bindsym $mod+Shift+0 move container to workspace $ws-misc

# Resize 

mode "resize" {
  bindsym $left       resize shrink width  10 px or 10 ppt
  bindsym $down       resize grow   height 10 px or 10 ppt
  bindsym $up         resize shrink height 10 px or 10 ppt
  bindsym $right      resize grow   width  10 px or 10 ppt
  bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Move workspaces

mode "move ws" {
  bindsym 1 move workspace to output eDP1
  bindsym 2 move workspace to output DP1
  bindsym 3 move workspace to output HDMI2
  bindsym Escape mode "default" 
}
bindsym $mod+p mode "move ws" 

# Assign workspaces to screens 

workspace $ws-code output DP1
workspace $ws-browse output HDMI2
workspace $ws-term output eDP1 
workspace $ws-messaging output eDP1 
workspace $ws-music output eDP1 
workspace $ws-misc output DP1

# Styling 

gaps              inner 14
smart_gaps        on
hide_edge_borders smart
title_align       center

for_window [class=".*"] border pixel 2

# class                 border   bground  text     indic.   child_border
client.focused          $black77 $black77 $white   $blue    $white
client.focused_inactive $black00 $black00 $white77 $black00 $black00
client.unfocused        $black00 $black00 $white77 $black00 $black00
client.urgent           $black77 $black77 $red     $black77 $black77
client.placeholder      $black77 $black77 $white77 $black77 $black77
client.background       $black77

# Bar 

bar {
  status_command i3status 
  i3bar_command i3bar --transparency

  position top
  tray_output none
  strip_workspace_numbers yes
  font pango:$font $font_weight $font_size
  output eDP1

  colors {
    background $blackaa
    statusline $white
    separator  $white00

#	                 border   bground  text
    focused_workspace  $blackaa $blackaa $magenta
    active_workspace   $blackaa $blackaa #949ba5
    inactive_workspace $blackaa $blackaa #949ba5
    urgent_workspace   $blackaa $blackaa $red
    binding_mode       $blackaa $yellow  $black
  }
}

# Application assginments 

assign [instance="^chromium$"]         $ws-browse 
assign [instance="^nvim$"]             $ws-code
assign [instance="^web.whatsapp.com$"] $ws-messaging
assign [instance="^matterhorn$"]       $ws-messaging
assign [instance="^talk.sclable.com$"] $ws-messaging
assign [instance="^telegram-desktop$"] $ws-messaging

for_window [instance="^spotify$"]  move to workspace $ws-music 
for_window [instance="^chromium$"] focus
for_window [instance="^nvim$"]     focus

# Autostart 

exec --no-startup-id redshift 

