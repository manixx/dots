#!/bin/zsh

cmd=$1

case ${cmd} in
	off)
		if pgrep -x nvim &> /dev/null; then
			notify-send \
				-u critical \
				"Poweroff blocked" \
				"Neovim still running"
			exit 1
		fi
		killall chromium --wait
		sudo poweroff
	;;

	sleep)
		sudo ZZZ
	;;

	*)
		echo "error - define command"
		exit 0
esac
